memory_templates = {
    "Template 1: Base": {
        "structure": {
            # --- PERSONAL GROWTH & INSIGHTS  ---
            "Personal Growth & Development": {
                "Milestones": [],
                "Challenges Overcome": [],
                "Lessons Learned": [],
                "Skills Developed": [],
                "Values & Beliefs": [],
                "Goals & Aspirations": [],
                "Significant Decisions": {
                    "Choice Points": [],
                    "Reasons & Reflections": [],
                    "Consequences": [],
                    "What If": []  # Alternative paths not taken
                }
            },

            # --- RELATIONSHIPS & CONNECTIONS ---
            "Relationships & Social Connections": {
                "Family": {
                    "Parents": [],
                    "Siblings": [],
                    "Extended Family": [],
                    "Significant Family Events": []
                },
                "Friendships": {
                    "Close Friends": [],
                    "Circles & Groups": [],
                    "Meaningful Interactions": []
                },
                "Romantic Relationships": {
                    "Partners": [],
                    "Dates & Special Moments": [],
                    "Relationship Milestones": [],
                    "Intimacy & Sexuality": {
                        "Experiences": [],
                        "Reflections": [],
                        "Boundaries": [],
                        "Consent": [],
                        "Values": []
                    }
                },
                "Professional Relationships": {
                    "Colleagues & Peers": [],
                    "Mentors & Role Models": [],
                    "Clients & Collaborators": []
                }
            },

            # --- TRAVEL & EXPLORATION ---
            "Travel & Exploration": {
                "Trips & Journeys": {
                    "By Destination": {},  # Memories organized by place
                    "By Purpose": {}  # Memories grouped by reason for travel
                },
                "Significant Locations": {
                    "Homes": [],
                    "Cities": [],
                    "Natural Places": []
                },
                "Cultures & Experiences": [],
                "Sensory Memories": {
                    "Sights": [],
                    "Sounds": [],
                    "Tastes": [],
                    "Smells": [],
                    "Touch & Textures": []
                }
            },

            # --- HOBBIES, INTERESTS & CREATIVITY ---
            "Hobbies, Interests & Passions": {
                "Creative Pursuits": {
                    "Writing": {
                        "My Writing": [],  # Your own works
                        "Inspirations": []  # Inspiring authors, books, etc.
                    },
                    "Music": {
                        "My Music": [],  # Your compositions, performances
                        "Inspirations": []  # Favorite artists, albums
                    },
                    "Art": {
                        "My Art": [],
                        "Inspirations": []
                    },
                    "Performance": {
                        "My Performances": [],
                        "Inspirations": []
                    },
                    "Crafting": {
                        "My Creations": [],
                        "Inspirations": []
                    }
                    # ... Add other creative outlets
                },
                "Sports & Fitness": {
                    "Individual Sports": [],
                    "Team Sports": [],
                    "Fitness Activities": [],
                    "Competitions & Events": []
                },
                "Learning & Exploration": {
                    "Subjects & Topics": [],
                    "Books & Articles": [],
                    "Courses & Workshops": [],
                    "Documentaries & Films": []
                }
            },

            # --- KNOWLEDGE, LEARNING & RESOURCES ---
            "Knowledge & Education": {
                "Formal Education": {
                    "Schools": [],
                    "Degrees & Certifications": [],
                    "Significant Projects": []
                },
                "Self-Directed Learning": {
                    "Skills Acquired": [],
                    "Areas of Interest": [],
                    "Learning Resources": {
                        "Bookshelf": [],
                        "Online Courses": [],
                        "Mentors & Teachers": []
                    }
                },
                "Knowledge Base": {
                    "Facts & Concepts": [],
                    "Historical Events": [],
                    "Scientific Discoveries": [],
                    "Philosophical Ideas": [],
                    "Artistic Movements": [],
                    "Cultural Insights": []
                },
                "Laws & Regulations": {
                    "Legal Knowledge": [],
                    "Personal Experiences with Laws": [],
                    "Understanding of Legal Systems": []
                }
            },

            # --- WORK & CAREER ---
            "Work & Career": {
                "Jobs & Positions": [],
                "Projects & Accomplishments": [],
                "Skills & Expertise": [],
                "Career Goals": []
            },

            # --- HEALTH & WELLBEING ---
            "Health & Wellbeing": {
                "Physical Health": {
                    "Body Image": [],
                    "Experiences": []
                },
                "Mental & Emotional Health": [],
                "Habits & Routines": [],
                "Pain & Discomfort": {
                    "Physical Pain": [],
                    "Emotional Pain": []
                }
            },

            # --- INTELLECTUAL & CONCEPTUAL ---
            "Intellectual & Conceptual": {
                "Concepts & Ideas": {
                    "Key Concepts": [],
                    "Emerging Ideas": [],
                    "Areas of Interest": []
                },
                "Problems & Challenges": {
                    "Unresolved Problems": [],
                    "Past Challenges": [],
                    "Problem-Solving Strategies": []
                },
                "Contradictions & Paradoxes": [],
                "Unknowns & Mysteries": [],
                "Questions & Inquiries": []
            },

            # --- DREAMS, INTUITIONS & SUBCONSCIOUS ---
            "Dreams & Subconscious": {
                "Dream Journal": [],
                "Intuitions & Insights": [],
                "Recurring Themes": []
            },

            # --- CHALLENGES & SETBACKS ---
            "Challenges & Setbacks": {
                "Significant Mistakes": {
                    "Description": [],
                    "Lessons Learned": [],
                    "How I Grew": []
                },
                "Failures & Disappointments": {
                    "In Personal Projects": [],
                    "In Relationships": [],
                    "In Career": []
                    # ... other relevant areas
                },
                "Difficult Emotions": {
                    "Fear & Anxiety": [],
                    "Anger & Frustration": [],
                    "Sadness & Grief": [],
                    "Shame & Guilt": [],
                    "Jealousy & Envy": [],
                    "Trauma & Abuse": {
                        "Experiences": [],
                        "Impact": [],
                        "Healing Journey": []
                    },
                    # ... other challenging emotions
                },
                "Negative Thought Patterns": [],  # To identify and address
                "Areas for Improvement": []  # Personal growth opportunities
            },

            # --- SENSITIVE EXPERIENCES ---
            "Sensitive Experiences": {
                "Sexuality & Intimacy": {
                    "Experiences": [],
                    "Reflections": [],
                    "Boundaries": [],
                    "Consent": [],
                    "Values": []
                },
                "Trauma & Abuse": {
                    "Physical": [],
                    "Emotional": [],
                    "Sexual": [],
                    "Impact": [],
                    "Healing Journey": []
                },
                "Dangerous Situations": {
                    "Experiences": [],
                    "Impact": [],
                    "Lessons Learned": []
                }
            },

            # --- GOALS, VISIONS & FUTURE ---
            "Goals & Visions": {
                "Life Vision Board": [],  # Big picture aspirations
                "Personal Goals": [],
                "Professional Goals": [],
                "Creative Goals": [],
                "Relationship Goals": [],
                "Health & Wellbeing Goals": [],
                "Learning Goals": [],
                "Action Plans": {}  # Connect plans to specific goals
            },

            # --- SIGNIFICANT EVENTS & MEMORIES ---
            "Significant Events & Memories": {
                "Positive": [],
                "Negative": [],
                "Life-Changing": {
                    "Positive": [],
                    "Negative": []
                }
            }
        }
    },
    "Template 2: Second": {
        "structure": {
            "Actions and Results": {
                "past": [
                    {"category": "Personal Growth & Development", "items": ["Milestones", "Challenges Overcome", "Significant Decisions.Choice Points", "Significant Decisions.Consequences"]},
                    {"category": "Relationships & Social Connections", "items": ["Family.Significant Family Events", "Friendships.Meaningful Interactions", "Romantic Relationships.Relationship Milestones", "Professional Relationships.Projects & Accomplishments"]},
                    {"category": "Travel & Exploration", "items": ["Trips & Journeys.By Destination", "Trips & Journeys.By Purpose", "Cultures & Experiences"]},
                    {"category": "Hobbies, Interests & Passions", "items": ["Creative Pursuits.My Writing", "Creative Pursuits.My Music", "Creative Pursuits.My Art", "Creative Pursuits.My Performances", "Creative Pursuits.My Creations", "Sports & Fitness.Competitions & Events", "Learning & Exploration.Courses & Workshops", "Learning & Exploration.Documentaries & Films"]},
                    {"category": "Knowledge & Education", "items": ["Formal Education.Schools", "Formal Education.Degrees & Certifications", "Formal Education.Significant Projects", "Self-Directed Learning.Skills Acquired", "Self-Directed Learning.Learning Resources"]},
                    {"category": "Work & Career", "items": ["Jobs & Positions", "Projects & Accomplishments"]},
                    {"category": "Health & Wellbeing", "items": ["Physical Health.Experiences", "Habits & Routines"]},
                    {"category": "Intellectual & Conceptual", "items": ["Concepts & Ideas.Key Concepts", "Problems & Challenges.Past Challenges", "Problems & Challenges.Problem-Solving Strategies"]},
                    {"category": "Dreams & Subconscious", "items": ["Dream Journal", "Intuitions & Insights"]},
                    {"category": "Challenges & Setbacks", "items": ["Significant Mistakes.Description", "Failures & Disappointments", "Difficult Emotions.Experiences", "Negative Thought Patterns"]},
                    {"category": "Sensitive Experiences", "items": ["Sexuality & Intimacy.Experiences", "Trauma & Abuse.Experiences", "Dangerous Situations.Experiences"]},
                    {"category": "Goals & Visions", "items": ["Action Plans"]}
                ],
                "present": [
                    {"category": "Personal Growth & Development", "items": ["Skills Developed", "Goals & Aspirations"]},
                    {"category": "Relationships & Social Connections", "items": ["Family.Parents", "Family.Siblings", "Family.Extended Family", "Friendships.Close Friends", "Friendships.Circles & Groups", "Romantic Relationships.Partners", "Professional Relationships.Colleagues & Peers", "Professional Relationships.Mentors & Role Models", "Professional Relationships.Clients & Collaborators"]},
                    {"category": "Travel & Exploration", "items": ["Significant Locations.Homes", "Significant Locations.Cities", "Significant Locations.Natural Places", "Sensory Memories"]},
                    {"category": "Hobbies, Interests & Passions", "items": ["Creative Pursuits.Inspirations", "Sports & Fitness.Individual Sports", "Sports & Fitness.Team Sports", "Sports & Fitness.Fitness Activities", "Learning & Exploration.Subjects & Topics", "Learning & Exploration.Books & Articles"]},
                    {"category": "Knowledge & Education", "items": ["Knowledge Base", "Laws & Regulations"]},
                    {"category": "Work & Career", "items": ["Skills & Expertise", "Career Goals"]},
                    {"category": "Health & Wellbeing", "items": ["Physical Health.Body Image", "Mental & Emotional Health", "Pain & Discomfort"]},
                    {"category": "Intellectual & Conceptual", "items": ["Concepts & Ideas.Emerging Ideas", "Concepts & Ideas.Areas of Interest", "Problems & Challenges.Unresolved Problems", "Contradictions & Paradoxes", "Unknowns & Mysteries", "Questions & Inquiries"]},
                    {"category": "Challenges & Setbacks", "items": ["Significant Mistakes.Lessons Learned", "Significant Mistakes.How I Grew", "Difficult Emotions.Impact", "Difficult Emotions.Healing Journey", "Areas for Improvement"]},
                    {"category": "Sensitive Experiences", "items": ["Sexuality & Intimacy.Reflections", "Sexuality & Intimacy.Boundaries", "Sexuality & Intimacy.Consent", "Sexuality & Intimacy.Values", "Trauma & Abuse.Impact", "Trauma & Abuse.Healing Journey", "Dangerous Situations.Impact", "Dangerous Situations.Lessons Learned"]},
                    {"category": "Goals & Visions", "items": ["Life Vision Board", "Personal Goals", "Professional Goals", "Creative Goals", "Relationship Goals", "Health & Wellbeing Goals", "Learning Goals"]}
                ],
                "future": [
                    {"category": "Personal Growth & Development", "items": ["Significant Decisions.What If"]},
                    {"category": "Relationships & Social Connections", "items": ["Romantic Relationships.Dates & Special Moments"]},
                    {"category": "Goals & Visions", "items": ["Action Plans.Specific Actions", "Action Plans.Expected Outcomes"]}
                ]
            },
            "Things": {
                "past": [
                    {"category": "Travel & Exploration", "items": ["Trips & Journeys.By Destination", "Significant Locations.Homes", "Significant Locations.Cities", "Significant Locations.Natural Places", "Cultures & Experiences"]},
                    {"category": "Hobbies, Interests & Passions", "items": ["Creative Pursuits.My Writing", "Creative Pursuits.My Music", "Creative Pursuits.My Art", "Creative Pursuits.My Performances", "Creative Pursuits.My Creations", "Learning & Exploration.Books & Articles"]},
                    {"category": "Knowledge & Education", "items": ["Formal Education.Schools", "Formal Education.Degrees & Certifications", "Self-Directed Learning.Learning Resources.Bookshelf", "Self-Directed Learning.Learning Resources.Online Courses", "Knowledge Base", "Laws & Regulations.Legal Knowledge"]},
                    {"category": "Work & Career", "items": ["Jobs & Positions", "Projects & Accomplishments"]},
                    {"category": "Dreams & Subconscious", "items": ["Dream Journal", "Recurring Themes"]},
                    {"category": "Challenges & Setbacks", "items": ["Failures & Disappointments"]}
                ],
                "present": [
                    {"category": "Relationships & Social Connections", "items": ["Family.Parents", "Family.Siblings", "Family.Extended Family", "Friendships.Close Friends", "Friendships.Circles & Groups", "Romantic Relationships.Partners", "Professional Relationships.Colleagues & Peers", "Professional Relationships.Mentors & Role Models", "Professional Relationships.Clients & Collaborators"]},
                    {"category": "Hobbies, Interests & Passions", "items": ["Sports & Fitness.Individual Sports", "Sports & Fitness.Team Sports", "Sports & Fitness.Fitness Activities"]},
                    {"category": "Knowledge & Education", "items": ["Self-Directed Learning.Learning Resources.Mentors & Teachers"]},
                    {"category": "Work & Career", "items": ["Skills & Expertise"]},
                    {"category": "Health & Wellbeing", "items": ["Physical Health.Body Image", "Habits & Routines"]},
                    {"category": "Intellectual & Conceptual", "items": ["Concepts & Ideas.Areas of Interest", "Problems & Challenges.Unresolved Problems", "Contradictions & Paradoxes", "Unknowns & Mysteries", "Questions & Inquiries"]},
                    {"category": "Challenges & Setbacks", "items": ["Significant Mistakes.Description", "Difficult Emotions.Negative Thought Patterns"]}
                ],
                "future": [
                    {"category": "Goals & Visions", "items": ["Life Vision Board", "Personal Goals", "Professional Goals", "Creative Goals", "Relationship Goals", "Health & Wellbeing Goals", "Learning Goals"]}
                ]
            },
            "OwnState": {
                "past": [
                    {"category": "Personal Growth & Development", "items": ["Lessons Learned", "Values & Beliefs"]},
                    {"category": "Relationships & Social Connections", "items": ["Romantic Relationships.Intimacy & Sexuality.Experiences", "Romantic Relationships.Intimacy & Sexuality.Reflections", "Romantic Relationships.Intimacy & Sexuality.Boundaries", "Romantic Relationships.Intimacy & Sexuality.Consent", "Romantic Relationships.Intimacy & Sexuality.Values"]},
                    {"category": "Health & Wellbeing", "items": ["Mental & Emotional Health"]},
                    {"category": "Challenges & Setbacks", "items": ["Significant Mistakes.Lessons Learned", "Significant Mistakes.How I Grew", "Failures & Disappointments", "Difficult Emotions.Impact", "Difficult Emotions.Healing Journey", "Areas for Improvement"]},
                    {"category": "Sensitive Experiences", "items": ["Sexuality & Intimacy.Experiences", "Sexuality & Intimacy.Reflections", "Sexuality & Intimacy.Boundaries", "Sexuality & Intimacy.Consent", "Sexuality & Intimacy.Values", "Trauma & Abuse.Impact", "Trauma & Abuse.Healing Journey", "Dangerous Situations.Impact", "Dangerous Situations.Lessons Learned"]},
                    {"category": "Goals & Visions", "items": ["Life Vision Board"]}
                ],
                "present": [
                    {"category": "Health & Wellbeing", "items": ["Physical Health.Body Image", "Physical Health.Experiences", "Mental & Emotional Health", "Pain & Discomfort"]},
                    {"category": "Challenges & Setbacks", "items": ["Negative Thought Patterns"]}
                ],
                "future": [
                    {"category": "Personal Growth & Development", "items": ["Goals & Aspirations"]},
                    {"category": "Relationships & Social Connections", "items": ["Romantic Relationships.Dates & Special Moments"]},
                    {"category": "Goals & Visions", "items": ["Personal Goals", "Professional Goals", "Creative Goals", "Relationship Goals", "Health & Wellbeing Goals", "Learning Goals"]}
                ]
            },
            "Paradoxes and Contradictions": {
                "past": [
                    {"category": "Intellectual & Conceptual", "items": ["Past Paradoxes", "Past Internal Conflicts", "Past Cognitive Dissonance"]},
                    {"category": "Challenges & Setbacks", "items": ["Significant Mistakes.Description", "Failures & Disappointments", "Difficult Emotions.Impact", "Difficult Emotions.Healing Journey", "Areas for Improvement"]}
                ],
                "present": [
                    {"category": "Intellectual & Conceptual", "items": ["Current Paradoxes", "Ongoing Internal Conflicts", "Current Cognitive Dissonance"]},
                    {"category": "Challenges & Setbacks", "items": ["Negative Thought Patterns"]}
                ],
                "future": [
                    {"category": "Intellectual & Conceptual", "items": ["Potential Paradoxes", "Expected Internal Conflicts", "Strategies to Address Dissonance"]}
                ]
            },
            "Living Things": {
                "past": [
                    {"category": "Relationships & Social Connections", "items": ["Family.Parents", "Family.Siblings", "Family.Extended Family", "Friendships.Close Friends", "Friendships.Circles & Groups", "Romantic Relationships.Partners", "Professional Relationships.Colleagues & Peers", "Professional Relationships.Mentors & Role Models", "Professional Relationships.Clients & Collaborators"]},
                    {"category": "Travel & Exploration", "items": ["Cultures & Experiences"]},
                    {"category": "Challenges & Setbacks", "items": ["Failures & Disappointments.In Relationships"]}
                ],
                "present": [
                    {"category": "Relationships & Social Connections", "items": ["Family.Parents", "Family.Siblings", "Family.Extended Family", "Friendships.Close Friends", "Friendships.Circles & Groups", "Romantic Relationships.Partners", "Professional Relationships.Colleagues & Peers", "Professional Relationships.Mentors & Role Models", "Professional Relationships.Clients & Collaborators"]},
                    {"category": "Travel & Exploration", "items": ["Cultures & Experiences"]},
                    {"category": "Hobbies, Interests & Passions", "items": ["Sports & Fitness.Team Sports"]}
                ],
                "future": [
                    {"category": "Relationships & Social Connections", "items": ["Romantic Relationships.Dates & Special Moments"]},
                    {"category": "Goals & Visions", "items": ["Relationship Goals"]}
                ]
            }
        }
    },
    "Template 3: Journey": {
        "structure": {
            # --- CORE EXPERIENCES  ---
            "Core Experiences": {
                "Key Moments": {
                    "Significant Events": [],  # Birthdays, graduations, travels, etc.
                    "Life-Changing Events": [],
                    "Turning Points": []  # Moments that shifted your path
                },
                "Recurring Themes": [],  # Patterns in your experiences
                "Challenges Faced": {
                    "External Challenges": [],  # Obstacles from the outside world
                    "Internal Challenges": [],  # Inner conflicts, fears, etc.
                },
                "Triumphs & Accomplishments": {
                    "Personal Achievements": [],
                    "Professional Successes": [],
                    "Creative Wins": []
                }
            },

            # --- EMOTIONAL LANDSCAPE ---
            "Emotional Landscape": {
                "Dominant Emotions": {
                    "Joy & Excitement": [],
                    "Love & Connection": [],
                    "Sadness & Grief": [],
                    "Anger & Frustration": [],
                    "Fear & Anxiety": [],
                    "Other Emotions": []
                },
                "Emotional Triggers": {
                    "Situations": [],  # Events that evoke specific emotions
                    "People": [],
                    "Thoughts": []
                },
                "Emotional Growth": {
                    "Overcoming Negative Patterns": [],
                    "Developing Emotional Intelligence": [],
                    "Building Resilience": []
                }
            },

            # ---  REFLECTIONS & INSIGHTS ---
            "Reflections & Insights": {
                "Personal Values": [],  # What matters most to you
                "Beliefs & Assumptions": [],
                "Lessons Learned": {
                    "From Successes": [],
                    "From Mistakes": [],
                    "From Relationships": []
                },
                "Wisdom & Understanding": [],
                "Self-Discovery": {
                    "Strengths & Talents": [],
                    "Areas for Growth": [],
                    "What I've Learned About Myself": []
                }
            },

            # --- RELATIONSHIPS & CONNECTIONS ---
            "Relationships & Connections": {
                "Family": {
                    "Bonds & Dynamics": [],
                    "Key Moments": [],
                    "Impact on My Life": []
                },
                "Friendships": {
                    "Meaningful Connections": [],
                    "Shared Experiences": [],
                    "Impact on My Life": []
                },
                "Romantic Relationships": {
                    "Significant Partners": [],
                    "Key Moments": [],
                    "Impact on My Life": []
                },
                "Professional Relationships": {
                    "Mentors & Guides": [],
                    "Collaborative Projects": [],
                    "Impact on My Life": []
                }
            },

            # ---  FUTURE ASPIRATIONS ---
            "Future Aspirations": {
                "Personal Goals": [],
                "Professional Goals": [],
                "Creative Goals": [],
                "Relationship Goals": [],
                "Life Vision": []  # Overall direction and aspirations
            }
        }
    },
    "Template 4: Hierarchical": {
        "structure": {
            # --- LIFE EVENTS & TRANSITIONS ---
            "Life Events & Transitions": {
                "Significant Events": {
                    "Personal": [
                        {"category": "Birthdays", "items": []},
                        {"category": "Graduations", "items": []},
                        {"category": "Weddings", "items": []},
                        {"category": "Other Personal Events", "items": []}
                    ],
                    "Professional": [
                        {"category": "Job Changes", "items": []},
                        {"category": "Promotions", "items": []},
                        {"category": "Project Completions", "items": []},
                        {"category": "Other Professional Events", "items": []}
                    ],
                    "Travel": [
                        {"category": "Trips & Journeys", "items": []},
                        {"category": "Moving Homes", "items": []},
                        {"category": "Other Travel Events", "items": []}
                    ]
                },
                "Life Transitions": {
                    "Personal Growth": [
                        {"category": "Milestones", "items": []},
                        {"category": "Challenges Overcome", "items": []},
                        {"category": "Significant Decisions", "items": []},
                        {"category": "Personal Beliefs & Values", "items": []}
                    ],
                    "Relationships": [
                        {"category": "Family Dynamics", "items": []},
                        {"category": "Friendships", "items": []},
                        {"category": "Romantic Relationships", "items": []},
                        {"category": "Professional Connections", "items": []}
                    ],
                    "Health & Wellbeing": [
                        {"category": "Physical Health", "items": []},
                        {"category": "Mental & Emotional Health", "items": []},
                        {"category": "Habits & Routines", "items": []}
                    ],
                    "Knowledge & Skills": [
                        {"category": "Formal Education", "items": []},
                        {"category": "Self-Directed Learning", "items": []},
                        {"category": "Skills & Expertise", "items": []}
                    ]
                }
            },

            # --- EMOTIONS & REFLECTIONS ---
            "Emotions & Reflections": {
                "Emotional Experiences": {
                    "Dominant Emotions": [
                        {"category": "Joy & Excitement", "items": []},
                        {"category": "Love & Connection", "items": []},
                        {"category": "Sadness & Grief", "items": []},
                        {"category": "Anger & Frustration", "items": []},
                        {"category": "Fear & Anxiety", "items": []},
                        {"category": "Other Emotions", "items": []}
                    ],
                    "Emotional Triggers": [
                        {"category": "Situations", "items": []},
                        {"category": "People", "items": []},
                        {"category": "Thoughts", "items": []}
                    ]
                },
                "Personal Growth & Insights": {
                    "Lessons Learned": [
                        {"category": "From Successes", "items": []},
                        {"category": "From Mistakes", "items": []},
                        {"category": "From Relationships", "items": []}
                    ],
                    "Self-Discovery": [
                        {"category": "Strengths & Talents", "items": []},
                        {"category": "Areas for Growth", "items": []},
                        {"category": "What I've Learned About Myself", "items": []}
                    ]
                }
            },

            # ---  GOALS & ASPIRATIONS ---
            "Goals & Aspirations": {
                "Personal Goals": [
                    {"category": "Health & Wellbeing", "items": []},
                    {"category": "Personal Development", "items": []},
                    {"category": "Relationships", "items": []},
                    {"category": "Creative Pursuits", "items": []},
                    {"category": "Other Personal Goals", "items": []}
                ],
                "Professional Goals": [
                    {"category": "Career Advancement", "items": []},
                    {"category": "Skills & Expertise", "items": []},
                    {"category": "Project Goals", "items": []},
                    {"category": "Other Professional Goals", "items": []}
                ],
                "Life Vision": {
                    "Values & Beliefs", "Aspirations", "Dreams"
                }
            }
        }
    },
    "Template 5: Emotional Landscapes": {
        "structure": {
            # ---  EMOTIONAL WEATHER ---
            "Emotional Weather": {
                "Dominant Weather Patterns": {
                    "Calm & Serene": {
                        "Description": [],
                        "Triggers": [],
                        "Physical Sensations": []
                    },
                    "Energetic & Excited": {
                        "Description": [],
                        "Triggers": [],
                        "Physical Sensations": []
                    },
                    "Anxious & Worried": {
                        "Description": [],
                        "Triggers": [],
                        "Physical Sensations": []
                    },
                    "Sad & Melancholy": {
                        "Description": [],
                        "Triggers": [],
                        "Physical Sensations": []
                    },
                    "Angry & Frustrated": {
                        "Description": [],
                        "Triggers": [],
                        "Physical Sensations": []
                    },
                    "Other Weather Patterns": []  # Add any additional patterns
                },
                "Weather Shifts": {
                    "Sudden Shifts": [],
                    "Gradual Changes": [],
                    "Factors Influencing Shifts": []
                }
            },

            # ---  EMOTIONAL PALETTE ---
            "Emotional Palette": {
                "Dominant Colors": {
                    "Joy & Happiness": {
                        "Description": [],
                        "Examples": [],
                        "Impact on Life": []
                    },
                    "Love & Connection": {
                        "Description": [],
                        "Examples": [],
                        "Impact on Life": []
                    },
                    "Peace & Tranquility": {
                        "Description": [],
                        "Examples": [],
                        "Impact on Life": []
                    },
                    "Creativity & Inspiration": {
                        "Description": [],
                        "Examples": [],
                        "Impact on Life": []
                    },
                    "Other Colors": []
                },
                "Color Blends": {
                    "Complementary Blends": [],
                    "Contrasting Blends": [],
                    "Impact of Blends": []
                }
            },

            # ---  EMOTIONAL REFLECTIONS ---
            "Emotional Reflections": {
                "Self-Awareness": {
                    "Emotional Triggers": [],
                    "Emotional Responses": [],
                    "Emotional Resilience": []
                },
                "Emotional Growth": {
                    "Learning & Understanding": [],
                    "Managing Emotions": [],
                    "Developing Emotional Intelligence": []
                }
            }
        }
    },
    "Template 6: Thematic": {
        "structure": {
            # --- CORE THEMES  ---
            "Core Themes": {
                "Love & Connection": {
                    "Memories": [],
                    "Insights & Reflections": [],
                    "Values & Beliefs": []
                },
                "Growth & Transformation": {
                    "Memories": [],
                    "Insights & Reflections": [],
                    "Values & Beliefs": []
                },
                "Adventure & Exploration": {
                    "Memories": [],
                    "Insights & Reflections": [],
                    "Values & Beliefs": []
                },
                "Creativity & Expression": {
                    "Memories": [],
                    "Insights & Reflections": [],
                    "Values & Beliefs": []
                },
                "Purpose & Meaning": {
                    "Memories": [],
                    "Insights & Reflections": [],
                    "Values & Beliefs": []
                },
                "Other Themes": []  # Add more themes as needed
            },

            # ---  KEY LIFE STAGES  ---
            "Life Stages": {
                "Childhood": {
                    "Memories": [],
                    "Significant People": [],
                    "Key Events & Experiences": []
                },
                "Adolescence": {
                    "Memories": [],
                    "Significant People": [],
                    "Key Events & Experiences": []
                },
                "Young Adulthood": {
                    "Memories": [],
                    "Significant People": [],
                    "Key Events & Experiences": []
                },
                "Midlife": {
                    "Memories": [],
                    "Significant People": [],
                    "Key Events & Experiences": []
                },
                "Later Life": {
                    "Memories": [],
                    "Significant People": [],
                    "Key Events & Experiences": []
                }
            },

            # ---  EMOTIONAL LANDSCAPE  ---
            "Emotional Landscape": {
                "Dominant Emotions": {
                    "Joy & Excitement": [],
                    "Love & Connection": [],
                    "Sadness & Grief": [],
                    "Anger & Frustration": [],
                    "Fear & Anxiety": [],
                    "Other Emotions": []
                },
                "Emotional Triggers": {
                    "Situations": [],
                    "People": [],
                    "Thoughts": []
                },
                "Emotional Growth": {
                    "Overcoming Negative Patterns": [],
                    "Developing Emotional Intelligence": [],
                    "Building Resilience": []
                }
            }
        }
    },
    "Template 8: Thought Threads": {
        "structure": {
            # --- CORE EXPERIENCES ---
            "Core Experiences": {
                "Significant Events": {
                    "Event": [],
                    "Thought Thread": [],
                    "Reflections": []
                },
                "Recurring Themes": {
                    "Theme": [],
                    "Thought Thread": [],
                    "Reflections": []
                },
                "Challenges Faced": {
                    "Challenge": [],
                    "Thought Thread": [],
                    "Reflections": []
                },
                "Triumphs & Accomplishments": {
                    "Accomplishment": [],
                    "Thought Thread": [],
                    "Reflections": []
                }
            },

            # --- RELATIONSHIPS & CONNECTIONS ---
            "Relationships & Connections": {
                "Relationship Type": {
                    "Person/Group": [],
                    "Thought Thread": [],
                    "Reflections": []
                },
                "Key Moments": {
                    "Moment": [],
                    "Thought Thread": [],
                    "Reflections": []
                }
            },

            # --- EMOTIONAL LANDSCAPE ---
            "Emotional Landscape": {
                "Emotions": {
                    "Emotion": [],
                    "Thought Thread": [],
                    "Reflections": []
                },
                "Emotional Triggers": {
                    "Trigger": [],
                    "Thought Thread": [],
                    "Reflections": []
                }
            },

            # ---  REFLECTIONS & INSIGHTS ---
            "Reflections & Insights": {
                "Insights": {
                    "Insight": [],
                    "Thought Thread": [],
                    "Reflections": []
                },
                "Self-Discovery": {
                    "Discovery": [],
                    "Thought Thread": [],
                    "Reflections": []
                }
            },

            # ---  GOALS & ASPIRATIONS ---
            "Goals & Aspirations": {
                "Goals": {
                    "Goal": [],
                    "Thought Thread": [],
                    "Reflections": []
                },
                "Life Vision": {
                    "Vision": [],
                    "Thought Thread": [],
                    "Reflections": []
                }
            }
        }
    },
    "Template 9: Memory Tree (Environments)": {
        "structure": {
            # --- ENVIRONMENTS ---
            "Environments": {
                "Homes": {
                    "Current Home": {
                        "Memories": [],
                        "Sensory Details": {
                            "Sights": [],
                            "Sounds": [],
                            "Smells": [],
                            "Tastes": [],
                            "Textures": []
                        },
                        "Key Events & Moments": [],
                        "Reflections & Insights": []
                    },
                    "Past Homes": {
                        "Home 1": {
                            "Memories": [],
                            "Sensory Details": {
                                "Sights": [],
                                "Sounds": [],
                                "Smells": [],
                                "Tastes": [],
                                "Textures": []
                            },
                            "Key Events & Moments": [],
                            "Reflections & Insights": []
                        },
                        "Home 2": {
                            "Memories": [],
                            "Sensory Details": {
                                "Sights": [],
                                "Sounds": [],
                                "Smells": [],
                                "Tastes": [],
                                "Textures": []
                            },
                            "Key Events & Moments": [],
                            "Reflections & Insights": []
                        },
                        # ... add more past homes
                    }
                },
                "Cities & Towns": {
                    "City 1": {
                        "Memories": [],
                        "Sensory Details": {
                            "Sights": [],
                            "Sounds": [],
                            "Smells": [],
                            "Tastes": [],
                            "Textures": []
                        },
                        "Key Events & Moments": [],
                        "Reflections & Insights": []
                    },
                    "City 2": {
                        "Memories": [],
                        "Sensory Details": {
                            "Sights": [],
                            "Sounds": [],
                            "Smells": [],
                            "Tastes": [],
                            "Textures": []
                        },
                        "Key Events & Moments": [],
                        "Reflections & Insights": []
                    },
                    # ... add more cities & towns
                },
                "Nature & Outdoors": {
                    "Nature Location 1": {
                        "Memories": [],
                        "Sensory Details": {
                            "Sights": [],
                            "Sounds": [],
                            "Smells": [],
                            "Tastes": [],
                            "Textures": []
                        },
                        "Key Events & Moments": [],
                        "Reflections & Insights": []
                    },
                    "Nature Location 2": {
                        "Memories": [],
                        "Sensory Details": {
                            "Sights": [],
                            "Sounds": [],
                            "Smells": [],
                            "Tastes": [],
                            "Textures": []
                        },
                        "Key Events & Moments": [],
                        "Reflections & Insights": []
                    },
                    # ... add more nature locations
                },
                "Other Environments": {
                    "Environment 1": {
                        "Memories": [],
                        "Sensory Details": {
                            "Sights": [],
                            "Sounds": [],
                            "Smells": [],
                            "Tastes": [],
                            "Textures": []
                        },
                        "Key Events & Moments": [],
                        "Reflections & Insights": []
                    },
                    "Environment 2": {
                        "Memories": [],
                        "Sensory Details": {
                            "Sights": [],
                            "Sounds": [],
                            "Smells": [],
                            "Tastes": [],
                            "Textures": []
                        },
                        "Key Events & Moments": [],
                        "Reflections & Insights": []
                    },
                    # ... add more other environments
                }
            }
        }
    ,
    "Template 10: Memory Tree (Importance Levels)": {
        "structure": {
            # --- IMPORTANCE LEVELS ---
            "Importance Levels": {
                "Life-Changing": {
                    "Events": [],
                    "Reflections": []
                },
                "Significant": {
                    "Events": [],
                    "Reflections": []
                },
                "Memorable": {
                    "Events": [],
                    "Reflections": []
                },
                "Everyday": {
                    "Events": [],
                    "Reflections": []
                }
            }
        }
    }
},
    "Template 10:Tapestry of Experiences": {
    "structure": {
        "Central Threads": {  # These act like branches in a mind map
            "My Essence": {  # Core values, beliefs, personality
                "Values & Beliefs": [],
                "Strengths & Weaknesses": [],
                "Passions & Interests": [],
                "Sensory Delights": { # Favorite sights, sounds, smells, tastes, textures
                    "Sight": [], "Sound": [], "Smell": [], "Taste": [], "Touch": []
                }
            },
            "Relationships": {
                "Family Tapestry": [],
                "Friendships": [],
                "Romantic Bonds": [],
                "Professional Connections": []
            },
            "Life's Adventures": {
                "Travel & Exploration": [],
                "Creative Pursuits": [],
                "Learning & Growth": []
            },
            "Challenges & Triumphs": { # Story Arc Element
                "Overcoming Adversity": {
                    "Challenges Faced": [],
                    "Lessons Learned": [],
                    "Resilience & Growth": []
                },
                "Celebrating Victories": {
                    "Personal Triumphs": [],
                    "Shared Successes": []
                }
            }
        },
        "Connecting Threads": [] # Use to link memories, themes, and insights across categories
    }
},
    "Template 11: Technology": {
        "structure": {
            # ---  TECHNOLOGICAL EXPERIENCES ---
            "Technological Experiences": {
                "Personal Devices": {
                    "Computers & Laptops": {
                        "First Computer": [],
                        "Significant Upgrades": [],
                        "Software & Operating Systems": [],
                        "Key Projects & Creations": []
                    },
                    "Mobile Phones & Tablets": {
                        "First Mobile Phone": [],
                        "Significant Upgrades": [],
                        "Apps & Services": [],
                        "Key Projects & Creations": []
                    },
                    "Other Devices": {
                        "Smart Home Devices": [],
                        "Wearables": [],
                        "Gaming Consoles": [],
                        "Other Devices": []
                    }
                },
                "Software & Programming": {
                    "Programming Languages Learned": [],
                    "Key Projects & Applications": [],
                    "Online Communities & Resources": [],
                    "Coding Challenges & Competitions": []
                },
                "Internet & Digital Culture": {
                    "First Internet Experience": [],
                    "Social Media Platforms": {
                        "Favorite Platforms": [],
                        "Key Interactions & Communities": [],
                        "Influential Content": []
                    },
                    "Online Games & Gaming": {
                        "Favorite Games & Genres": [],
                        "Key Achievements & Moments": [],
                        "Gaming Communities": []
                    },
                    "Digital Content Consumption": {
                        "Favorite Websites & Services": [],
                        "Influential Creators & Content": [],
                        "Digital Collections": []
                    },
                    "Other Digital Experiences": []
                },
                "Emerging Technologies": {
                    "Areas of Interest": [],
                    "Concepts & Applications": [],
                    "Predictions & Visions": []
                }
            },

            # --- TECH-RELATED REFLECTIONS ---
            "Tech-Related Reflections": {
                "Impact on Life": {
                    "Positive Impacts": [],
                    "Negative Impacts": [],
                    "Changes in Habits & Behaviors": []
                },
                "Ethics & Values": {
                    "Concerns & Dilemmas": [],
                    "Ethical Principles & Frameworks": [],
                    "Personal Stance on Tech Issues": []
                },
                "Technological Literacy": {
                    "Skills & Knowledge": [],
                    "Areas for Improvement": [],
                    "Future Learning Goals": []
                }
            }
        }
    },
    "Template 12: Health & Wellness": {
        "structure": {
            # ---  PHYSICAL HEALTH ---
            "Physical Health": {
                "Body Image & Self-Perception": {
                    "Past Experiences": [],
                    "Current Perceptions": [],
                    "Influencing Factors": []
                },
                "Physical Activity & Fitness": {
                    "Past Activities & Routines": [],
                    "Current Activities & Routines": [],
                    "Goals & Aspirations": [],
                    "Challenges & Obstacles": []
                },
                "Nutrition & Diet": {
                    "Past Eating Habits": [],
                    "Current Eating Habits": [],
                    "Food Preferences & Aversions": [],
                    "Dietary Changes & Experiments": [],
                    "Relationship with Food": []
                },
                "Sleep & Rest": {
                    "Past Sleep Patterns": [],
                    "Current Sleep Patterns": [],
                    "Sleep Quality & Challenges": [],
                    "Sleep Habits & Routines": []
                },
                "Medical History": {
                    "Chronic Conditions": [],
                    "Past Injuries & Illnesses": [],
                    "Medical Treatments & Procedures": [],
                    "Family Medical History": []
                }
            },

            # ---  MENTAL & EMOTIONAL WELLBEING ---
            "Mental & Emotional Wellbeing": {
                "Emotional Experiences": {
                    "Dominant Emotions": [],
                    "Emotional Triggers": [],
                    "Emotional Coping Mechanisms": []
                },
                "Mental Health History": {
                    "Mental Health Conditions": [],
                    "Therapy & Counseling": [],
                    "Self-Care Strategies": [],
                    "Impact on Life": []
                },
                "Stress & Anxiety": {
                    "Sources of Stress": [],
                    "Stress Management Techniques": [],
                    "Impact of Stress & Anxiety": []
                },
                "Happiness & Fulfillment": {
                    "Sources of Joy & Happiness": [],
                    "Goals & Aspirations for Fulfillment": [],
                    "Factors Contributing to Happiness": []
                }
            },

            # ---  HEALTH & WELLNESS PRACTICES ---
            "Health & Wellness Practices": {
                "Self-Care Routines": {
                    "Daily Practices": [],
                    "Weekly Practices": [],
                    "Monthly Practices": [],
                    "Impact of Routines": []
                },
                "Alternative Therapies": {
                    "Types of Therapies Used": [],
                    "Experiences & Benefits": [],
                    "Beliefs & Attitudes": []
                },
                "Health & Wellness Goals": {
                    "Short-Term Goals": [],
                    "Long-Term Goals": [],
                    "Action Plans & Strategies": []
                }
            },

            # ---  REFLECTIONS & INSIGHTS ---
            "Reflections & Insights": {
                "Health & Wellness Values": [],
                "Lessons Learned": {
                    "From Health Challenges": [],
                    "From Wellness Practices": []
                },
                "Impact of Health & Wellness on Life": [],
                "Future Goals & Aspirations": []
            }
        }
    },
    "Template 13: Education & Learning": {
        "structure": {
            # ---  FORMAL EDUCATION ---
            "Formal Education": {
                "Schools & Institutions": {
                    "School 1": {
                        "Years Attended": [],
                        "Key Teachers & Mentors": [],
                        "Significant Experiences": [],
                        "Lessons Learned": []
                    },
                    "School 2": {
                        # ... similar structure as School 1
                    },
                    # ... add more schools as needed
                },
                "Degrees & Certifications": {
                    "Degree 1": {
                        "Field of Study": [],
                        "Thesis/Dissertation": [],
                        "Key Courses & Projects": [],
                        "Impact on Life": []
                    },
                    "Degree 2": {
                        # ... similar structure as Degree 1
                    },
                    # ... add more degrees as needed
                },
                "Extracurricular Activities": {
                    "Clubs & Organizations": [],
                    "Sports & Teams": [],
                    "Key Experiences & Accomplishments": [],
                    "Impact on Life": []
                },
                "Formal Learning Reflections": {
                    "Strengths & Weaknesses in Academia": [],
                    "Learning Styles & Preferences": [],
                    "Impact of Formal Education": []
                }
            },

            # ---  SELF-DIRECTED LEARNING ---
            "Self-Directed Learning": {
                "Areas of Interest": [],
                "Learning Resources": {
                    "Books & Articles": [],
                    "Online Courses & Platforms": [],
                    "Podcasts & Videos": [],
                    "Mentors & Coaches": []
                },
                "Projects & Creations": {
                    "Personal Projects": [],
                    "Creative Works": [],
                    "Skills & Expertise Developed": []
                },
                "Self-Learning Reflections": {
                    "Motivations for Self-Learning": [],
                    "Learning Strategies & Habits": [],
                    "Impact of Self-Learning": []
                }
            },

            # ---  KNOWLEDGE & INSIGHTS ---
            "Knowledge & Insights": {
                "Key Concepts & Theories": [],
                "Areas of Expertise": [],
                "Personal Beliefs & Values Shaped by Learning": [],
                "Unresolved Questions & Curiosity": [],
                "Future Learning Goals": []
            }
        }
    },
    "Template 14: Actions & Reactions": {
        "structure": {
            # --- ACTIONS ---
            "Actions": {
                "Categories": {
                    "Personal": {
                        "Actions": [],
                        "Motivations": [],
                        "Consequences": [],
                        "Reflections": []
                    },
                    "Professional": {
                        "Actions": [],
                        "Motivations": [],
                        "Consequences": [],
                        "Reflections": []
                    },
                    "Social": {
                        "Actions": [],
                        "Motivations": [],
                        "Consequences": [],
                        "Reflections": []
                    },
                    "Creative": {
                        "Actions": [],
                        "Motivations": [],
                        "Consequences": [],
                        "Reflections": []
                    },
                    "Other": {
                        "Actions": [],
                        "Motivations": [],
                        "Consequences": [],
                        "Reflections": []
                    }
                }
            },

            # --- REACTIONS ---
            "Reactions": {
                "Emotional Reactions": {
                    "Situations": [],
                    "Emotions": [],
                    "Physical Manifestations": [],
                    "Cognitive Responses": [],
                    "Behavioral Responses": []
                },
                "Behavioral Reactions": {
                    "Situations": [],
                    "Actions": [],
                    "Motivations": [],
                    "Consequences": []
                },
                "Cognitive Reactions": {
                    "Situations": [],
                    "Thoughts": [],
                    "Beliefs": [],
                    "Impact on Behavior": []
                }
            },

            # --- PATTERNS & INSIGHTS ---
            "Patterns & Insights": {
                "Recurring Action Patterns": [],
                "Common Reactions": [],
                "Self-Awareness & Growth": [],
                "Action-Reaction Cycle": []
            }
        }
    },
    "Template 15: Work & Career Tapestry": {
    "structure": {
      "I. Career Path & Milestones": {
        "Timeline of Roles & Positions": [
          {
            "Company": "Company 1",
            "Role": "Job Title",
            "Time Period": "Start Date - End Date",
            "Key Responsibilities": [],
            "Accomplishments": [],
            "Skills Developed": []
          },
          {
            "Company": "Company 2",
            "Role": "Job Title",
            "Time Period": "Start Date - End Date",
            "Key Responsibilities": [],
            "Accomplishments": [],
            "Skills Developed": []
          }

        ],
        "Significant Career Milestones": [
          {
            "Type": "Promotion/Recognition",
            "Description": ""
          },
          {
            "Type": "Key Project/Achievement",
            "Description": ""
          },
          {
            "Type": "Transition/Change",
            "Description": ""
          }

        ]
      },
      "II. Skillset & Expertise": {
        "Technical Skills": {
          "Areas of Expertise": [],
          "Proficiency Levels": [],
          "Examples of Use": []
        },
        "Soft Skills & Personal Attributes": {
          "Communication & Collaboration": [],
          "Problem-Solving & Critical Thinking": [],
          "Leadership & Teamwork": [],
          "Adaptability & Resilience": [],
          "Other Relevant Soft Skills": []
        },
        "Areas for Continued Development": {
          "Skills to Improve": [],
          "Learning & Development Plans": []
        }
      },
      "III. Work Ethic & Values": {
        "Work Values & Principles": {
          "Guiding Principles": [],
          "How these Values Manifest": []
        },
        "Motivational Factors": {
          "What Drives You": [],
          "Examples of Motivation": []
        },
        "Learning & Growth Mindset": {
          "Approach to Continuous Learning": [],
          "Examples of Growth Mindset in Action": []
        }
      },
      "IV. Career Goals & Aspirations": {
        "Short-Term Goals": {
          "Within the Next Year": [],
          "Action Plan": []
        },
        "Long-Term Goals": {
          "Within the Next 5 Years": [],
          "Within the Next 10 Years": [],
          "Vision for the Future": ""
        },
        "Career Path Exploration": {
          "Industries of Interest": [],
          "Specific Roles": [],
          "Potential Career Paths": []
        }
      },
      "V. Reflections & Insights": {
        "Impact of Work on Life": {
          "Personal Growth": "",
          "Relationship Dynamics": "",
          "Life Choices & Priorities": ""
        },
        "Lessons Learned": {
          "From Successes": [],
          "From Challenges": [],
          "From Mentors & Colleagues": []
        },
        "Future Aspirations & Plans": {
          "Continued Growth & Development": "",
          "Making a Difference": "",
          "Work-Life Balance": ""
        }
      }
    }
  },
    "Template 16: Exploring Sexuality": {
    "structure": {
      "I. Identity & Orientation": {
        "Sexual Identity": {
          "Labels & Terms": [],
          "How You Identify": "",
          "Evolution of Your Identity": ""
        },
        "Sexual Orientation": {
          "Attraction & Desire": "",
          "Romantic Attraction": "",
          "Aromanticism": "",
          "Sexuality Spectrum": "",
          "Fluidity & Change": ""
        },
        "Gender Identity": {
          "Gender Expression": "",
          "How You Express Your Gender": "",
          "Gender Roles & Expectations": "",
          "Gender Non-Conformity": ""
        }
      },
      "II. Experiences & Reflections": {
        "Early Exploration & Curiosity": {
          "Memories & Experiences": [],
          "Influences & Sources of Information": [],
          "Early Thoughts & Feelings": ""
        },
        "Relationships & Intimacy": {
          "Romantic Relationships": {
            "Partners & Experiences": [],
            "Key Moments & Memories": [],
            "Impact on Your Sexuality": ""
          },
          "Non-Romantic Intimacy": {
            "Friendships & Connections": [],
            "Shared Experiences": [],
            "Impact on Your Sexuality": ""
          },
          "Solo Exploration": {
            "Self-Discovery & Pleasure": [],
            "Body Awareness & Sensuality": "",
            "Impact on Your Sexuality": ""
          }
        },
        "Sexuality & Culture": {
          "Cultural Influences": [],
          "Media & Representation": [],
          "Social Norms & Expectations": "",
          "Impact on Your Experiences": ""
        },
        "Sexuality & Spirituality": {
          "Spiritual Beliefs & Practices": [],
          "Connection Between Spirituality & Sexuality": "",
          "Impact on Your Sexuality": ""
        },
        "Sexuality & Mental Health": {
          "Mental Health Conditions & Sexuality": "",
          "Impact on Your Sexuality": "",
          "Support & Resources": []
        }
      },
      "III. Values & Boundaries": {
        "Sexual Values & Beliefs": {
          "Core Values": [],
          "Beliefs About Consent": "",
          "Beliefs About Relationships": "",
          "Beliefs About Pleasure & Intimacy": ""
        },
        "Personal Boundaries": {
          "Physical Boundaries": [],
          "Emotional Boundaries": [],
          "Sexual Boundaries": [],
          "How You Communicate Boundaries": "",
          "Respecting Others' Boundaries": ""
        },
        "Consent & Communication": {
          "Understanding Consent": "",
          "How You Communicate Consent": "",
          "Negotiating & Respecting Consent": "",
          "Consent in Different Situations": ""
        }
      },
      "IV. Goals & Aspirations": {
        "Sexual Exploration & Growth": {
          "Areas of Interest": [],
          "Learning Goals": [],
          "Resources & Support": []
        },
        "Relationship Goals": {
          "Desires & Expectations": [],
          "Openness & Communication": "",
          "Building Healthy Relationships": ""
        },
        "Sexual Health & Wellness": {
          "Goals for Sexual Health": [],
          "Resources & Support": [],
          "Self-Care Practices": []
        },
        "Overall Vision for Your Sexuality": ""
      },
      "V. Reflections & Insights": {
        "Lessons Learned": {
          "From Experiences & Relationships": [],
          "From Learning & Growth": []
        },
        "Impact of Sexuality on Your Life": "",
        "Future Aspirations": "",
        "Continued Exploration & Growth": ""
      }
    }
  },
    "Template 17: Dangerous Situations": {
    "structure": {
      "I. Experiences & Events": {
        "Significant Events": [
          {
            "Event Description": "",
            "Location & Time": "",
            "People Involved": [],
            "Nature of Danger": "",
            "Immediate Reaction": ""
          }

        ],
        "Recurring Patterns": {
          "Common Themes": [],
          "Situations You Tend to Find Yourself In": [],
          "Triggers for Feeling Unsafe": [],
          "Behavioral Patterns": []
        }
      },
      "II. Emotional & Psychological Impact": {
        "Immediate Reactions": {
          "Fear & Anxiety": "",
          "Anger & Frustration": "",
          "Sadness & Grief": "",
          "Shame & Guilt": "",
          "Other Emotions": []
        },
        "Long-Term Effects": {
          "Trauma & PTSD": "",
          "Anxiety & Fear": "",
          "Trust Issues": "",
          "Self-Esteem & Confidence": "",
          "Other Impacts": []
        },
        "Coping Mechanisms": {
          "Healthy Coping Strategies": [],
          "Unhealthy Coping Strategies": [],
          "Impact of Coping Strategies": ""
        }
      },
      "III. Learning & Growth": {
        "Lessons Learned": {
          "From the Experiences": [],
          "About Yourself": [],
          "About Human Behavior": []
        },
        "Self-Awareness": {
          "Strengths in Difficult Situations": [],
          "Areas for Improvement": [],
          "Triggers & Warning Signs": [],
          "Risk Assessment Skills": ""
        },
        "Building Resilience": {
          "Strategies for Preventing Future Risks": [],
          "Building Support Networks": [],
          "Self-Care Practices": []
        }
      },
      "IV. Seeking Help & Resources": {
        "Support Systems": {
          "Friends & Family": "",
          "Therapists & Counselors": "",
          "Support Groups": "",
          "Other Resources": []
        },
        "Safety Plans": {
          "Steps to Take in Case of Danger": [],
          "Emergency Contacts": [],
          "Safety Measures": [],
          "Escape Routes": ""
        },
        "Legal & Advocacy Resources": {
          "Organizations & Hotlines": [],
          "Legal Options": ""
        }
      },
      "V. Looking Ahead": {
        "Future Goals": {
          "Feeling Safer": "",
          "Building Trust": "",
          "Preventing Future Risks": [],
          "Seeking Support & Empowerment": ""
        },
        "Vision for a Safe & Empowered Future": ""
      }
    }
  },
    "Template 18: Crime & Justice": {
    "structure": {
      "I. Personal Experiences": {
        "Victims of Crime": {
          "Type of Crime": "",
          "Date & Location": "",
          "Details of the Incident": [],
          "Immediate Reactions": {
            "Emotional Response": [],
            "Physical Response": [],
            "Behavioral Response": []
          },
          "Long-Term Impact": {
            "Emotional Impact": [],
            "Psychological Impact": [],
            "Social Impact": [],
            "Physical Impact": [],
            "Financial Impact": []
          },
          "Support & Resources Accessed": []
        },
        "Witness to Crime": {
          "Type of Crime": "",
          "Date & Location": "",
          "Details of the Incident": [],
          "Actions Taken": {
            "Immediate Actions": [],
            "Later Actions": []
          },
          "Impact on You": {
            "Emotional Impact": [],
            "Psychological Impact": [],
            "Social Impact": []
          },
          "Support & Resources Accessed": []
        },
        "Involvement with the Criminal Justice System": {
          "Role in the System": "",
          "Details of Involvement": [],
          "Experiences with Law Enforcement": {
            "Positive Experiences": [],
            "Negative Experiences": [],
            "Observations of Bias": []
          },
          "Experiences with Legal Professionals": {
            "Positive Experiences": [],
            "Negative Experiences": [],
            "Observations of Inequities": []
          },
          "Impact on Your Life": {
            "Emotional Impact": [],
            "Psychological Impact": [],
            "Social Impact": [],
            "Financial Impact": []
          }
        }
      },
      "II. Understanding Crime": {
        "Types of Crime": {
          "Crimes You're Familiar With": [],
          "Crimes You're Interested in Learning More About": []
        },
        "Causes of Crime": {
          "Social Factors": {
            "Poverty & Inequality": [],
            "Discrimination & Marginalization": [],
            "Lack of Opportunity": [],
            "Social Disorganization": [],
            "Cultural Influences": []
          },
          "Economic Factors": {
            "Unemployment & Underemployment": [],
            "Economic Instability": [],
            "Financial Distress": [],
            "Greed & Corruption": []
          },
          "Psychological Factors": {
            "Mental Health Issues": [],
            "Substance Abuse": [],
            "Personality Disorders": [],
            "Trauma & Abuse": []
          },
          "Other Potential Causes": {
            "Political Instability": [],
            "Environmental Factors": [],
            "Technological Factors": [],
            "Lack of Education": []
          }
        },
        "Impact of Crime": {
          "Individual Impact": {
            "Physical & Emotional Harm": [],
            "Loss of Property & Possessions": [],
            "Financial Loss": [],
            "Psychological Trauma": [],
            "Social Isolation": []
          },
          "Community Impact": {
            "Fear & Anxiety": [],
            "Erosion of Trust": [],
            "Increased Crime Rates": [],
            "Strain on Resources": [],
            "Social Disruption": []
          },
          "Societal Impact": {
            "Erosion of Social Fabric": [],
            "Decreased Quality of Life": [],
            "Economic Strain": [],
            "Political Instability": [],
            "Loss of Public Trust": []
          }
        }
      },
      "III. The Criminal Justice System": {
        "Key Components": {
          "Law Enforcement": {
            "Police Departments": [],
            "Sheriff's Offices": [],
            "State Police": [],
            "Federal Law Enforcement": []
          },
          "Courts": {
            "Trial Courts": [],
            "Appellate Courts": [],
            "Supreme Courts": []
          },
          "Corrections": {
            "Prisons": [],
            "Jails": [],
            "Probation & Parole": [],
            "Community Corrections": []
          },
          "Prosecution & Defense": {
            "Prosecutors": [],
            "Defense Attorneys": [],
            "Public Defenders": []
          },
          "Victim Services": {
            "Victim Advocacy Organizations": [],
            "Victim Assistance Programs": [],
            "Legal Aid": []
          }
        },
        "Your Perspective on the System": {
          "Strengths & Weaknesses": [],
          "Areas for Improvement": {
            "Policing Practices": [],
            "Sentencing & Punishment": [],
            "Rehabilitation & Reintegration": [],
            "Victim Support & Services": [],
            "Equity & Fairness": []
          },
          "Fairness & Justice": "",
          "Rehabilitation & Prevention": ""
        },
        "Experiences with the System": {
          "Positive Experiences": [],
          "Negative Experiences": [],
          "Lessons Learned": []
        }
      },
      "IV.  Social Justice & Criminal Justice Reform": {
        "Issues & Concerns": {
          "Over-Policing & Racial Bias": {
            "Racial Profiling": [],
            "Disproportionate Policing in Communities of Color": [],
            "Police Brutality": [],
            "Systemic Racism": []
          },
          "Mass Incarceration & Prison Reform": {
            "Overcrowding & Poor Conditions": [],
            "Sentencing Disparities": [],
            "Lack of Rehabilitation": [],
            "Reentry Challenges": [],
            "Prison Industrial Complex": []
          },
          "Reentry & Second Chances": {
            "Barriers to Reintegration": [],
            "Support Programs": [],
            "Employment Opportunities": [],
            "Stigma & Discrimination": []
          },
          "Victim Rights & Support": {
            "Access to Justice": [],
            "Trauma-Informed Care": [],
            "Financial Assistance": [],
            "Protection & Safety": []
          },
          "Other Issues": {
            "Mental Health & Substance Abuse in the System": [],
            "Juvenile Justice": [],
            "Cybercrime": [],
            "Human Trafficking": [],
            "Domestic Violence": []
          }
        },
        "Advocacy & Action": {
          "Organizations & Initiatives": [],
          "Your Role in Promoting Justice": "",
          "Potential Actions for Change": {
            "Supporting Reform Organizations": [],
            "Advocating for Policy Changes": [],
            "Educating Others": [],
            "Volunteering & Community Engagement": []
          }
        }
      },
      "V. Reflections & Insights": {
        "Lessons Learned": {
          "About Crime & Justice": [],
          "About Human Behavior": [],
          "About Your Own Values & Beliefs": []
        },
        "Impact of Crime on Your Life": {
          "Personal Impact": "",
          "Societal Impact": ""
        },
        "Future Hopes & Expectations": {
          "For Yourself": "",
          "For Society": ""
        },
        "Vision for a Safer & More Just Society": ""
      }
    }
  },
    "Template 19: Violence & Heinous Acts": {
    "structure": {
      "I. Witnessing or Experiencing Violence": {
        "Direct Exposure": {
          "Type of Violence": "",
          "Details of the Incident": [],
          "Location & Time": "",
          "People Involved": [],
          "Immediate Reactions": {
            "Emotional Response": [],
            "Physical Response": [],
            "Behavioral Response": []
          },
          "Long-Term Impact": {
            "Emotional Impact": [],
            "Psychological Impact": [],
            "Social Impact": [],
            "Physical Impact": []
          },
          "Support & Resources Accessed": []
        },
        "Indirect Exposure": {
          "Exposure Through Media": {
            "Types of Media": [],
            "Specific Examples": [],
            "Impact on You": []
          },
          "Exposure Through Stories & Accounts": {
            "Sources of Information": [],
            "Specific Stories": [],
            "Impact on You": []
          }
        },
        "Understanding the Impact": {
          "Personal Impact": "",
          "Societal Impact": "",
          "Global Impact": ""
        }
      },
      "II. Exploring the Causes": {
        "Individual Factors": {
          "Mental Health Issues": [],
          "Substance Abuse": [],
          "Trauma & Abuse": [],
          "Anger Management Issues": [],
          "Personality Disorders": []
        },
        "Social Factors": {
          "Poverty & Inequality": [],
          "Discrimination & Marginalization": [],
          "Lack of Opportunity": [],
          "Social Disorganization": [],
            "Cultural Norms": [],
            "Social Learning": []
        },
        "Environmental Factors": {
            "Exposure to Violence": [],
            "Availability of Weapons": [],
            "Lack of Safe Spaces": [],
            "Neighborhood Conditions": []
        },
        "Other Potential Causes": {
          "Political Instability": [],
          "Economic Crisis": [],
          "Ideological Extremism": [],
          "Media Influence": []
        }
      },
      "III. Addressing Violence & Heinous Acts": {
        "Prevention Strategies": {
          "Early Intervention Programs": [],
          "Trauma-Informed Care": [],
          "Violence Prevention Education": [],
          "Community Building & Empowerment": [],
          "Addressing Root Causes": []
        },
        "Intervention & Response": {
          "Emergency Services": [],
          "Victim Support Services": [],
          "Trauma-Informed Care": [],
          "Legal & Criminal Justice System": [],
          "Mental Health Services": [],
          "Community Support": []
        },
        "Rehabilitation & Healing": {
          "Therapy & Counseling": [],
          "Support Groups": [],
          "Victim Advocacy": [],
          "Reintegration Programs": []
        }
      },


      "IV. Reflections & Insights": {
        "Lessons Learned": {
          "About Human Nature": [],
          "About the Fragility of Life": [],
          "About the Importance of Compassion & Empathy": [],
          "About the Power of Hope & Resilience": []
        },
        "Impact on Your Values & Beliefs": {
          "Beliefs About Humanity": [],
          "Beliefs About Justice & Fairness": [],
          "Beliefs About Safety & Security": []
        },
        "Future Aspirations": {
          "For Yourself": "",
          "For Society": ""
        },
        "Vision for a Safer & More Compassionate World": ""
      }
    }
  },
    "Template 20: Exploring Non-Normative Sexuality & Intimacy": {
    "structure": {
        "I. Identity & Expression": {
            "Sexual Identity": [
                "Asexual",
                "Bisexual",
                "Pansexual",
                "Demisexual",
                "Polysexual",
                "Graysexual",
                "Sapiosexual",
                "Other Labels"
            ],
            "Sexual Orientation": [
                "Heterosexual",
                "Homosexual",
                "Bisexual",
                "Pansexual",
                "Asexual",
                "Other Orientations"
            ],
            "Gender Identity": [
                "Cisgender",
                "Transgender",
                "Non-Binary",
                "Genderfluid",
                "Agender",
                "Bigender",
                "Other Identities"
            ],
            "Kink & BDSM": {
                "Bondage & Restraint": [
                    "Rope",
                    "Leather",
                    "Silk",
                    "Other Materials"
                ],
                "Domination & Submission": [
                    "Power Exchange",
                    "Discipline & Punishment",
                    "Roleplay",
                    "Other Dynamics"
                ],
                "Sensory Deprivation & Stimulation": [
                    "Blindfolds",
                    "Gagging",
                    "Sensory Deprivation Tanks",
                    "Other Practices"
                ],
                "Roleplay & Fantasy": [
                    "Characters",
                    "Scenarios",
                    "Themes",
                    "Other Elements"
                ],
                "Electroplay": [
                    "Types of Devices",
                    "Intensity Levels",
                    "Safety Precautions"
                ],
                "Waterplay": [
                    "Shower Play",
                    "Bath Play",
                    "Other Water-Related Activities"
                ],
                "Other Practices": [
                    "Flogging",
                    "Spanking",
                    "Foot Fetish",
                    "Age Play",
                    "Other Kink & BDSM Practices"
                ]
            },
            "Personal Values & Beliefs": {
                "Consent": [
                    "Informed Consent",
                    "Enthusiastic Consent",
                    "Negotiating Consent",
                    "Revoking Consent"
                ],
                "Respect": [
                    "Respect for Boundaries",
                    "Respect for Identities",
                    "Respect for Preferences"
                ],
                "Communication": [
                    "Open and Honest Communication",
                    "Active Listening",
                    "Non-Verbal Communication"
                ]
            },
            "Aesthetics & Style": {
                "Clothing & Fashion": [
                    "Fetish Wear",
                    "Leather & Latex",
                    "Underwear & Lingerie",
                    "Specific Styles",
                    "Other Clothing Preferences"
                ],
                "Art & Visuals": [
                    "Photography",
                    "Painting",
                    "Sculpture",
                    "Film & Video",
                    "Other Visual Arts"
                ],
                "Music & Sound": [
                    "Genre Preferences",
                    "Specific Artists & Bands",
                    "Soundscapes & Ambiance",
                    "Music for Specific Practices"
                ],
                "Other Aesthetic Preferences": []
            }
        },
        "II. Sexual Experiences": {
            "Relationships": {
                "Romantic Relationships": [
                    "Initial Attraction",
                    "First Encounters",
                    "Early Exploration",
                    "Memorable Dates",
                    "Shared Experiences",
                    "Turning Points",
                    "Moments of Connection",
                    "First Time Saying 'I Love You'",
                    "Significant Gifts or Gestures",
                    "Conflict Resolution",
                    "Moments of Vulnerability",
                    "Moments of Deep Intimacy",
                    "Communication & Negotiation",
                    "Power Dynamics",
                    "Kink Exploration",
                    "Impact on Self-Discovery",
                    "Challenges & Growth",
                    "Current Relationships"
                ],
                "Non-Romantic Intimacy": [
                    "Platonic Relationships",
                    "Shared Interests",
                    "Open Communication",
                    "Exploring Sexuality Together",
                    "Parties & Events",
                    "Group Activities",
                    "Travel & Adventures",
                    "Moments of Connection",
                    "Impact on Sexuality",
                    "Boundary Setting",
                    "Consent in Non-Romantic Contexts"
                ],
                "Friendships": [],
                "Group Dynamics": [],
                "Online Relationships": []
            },
            "Solo Exploration": {
                "Masturbation": [
                    "Techniques",
                    "Sensations & Preferences",
                    "Impact on Sexuality"
                ],
                "Body Awareness": [
                    "Mindfulness & Meditation",
                    "Massage & Touch",
                    "Sensory Exploration",
                    "Body Image & Self-Acceptance"
                ],
                "Sensory Exploration": [
                    "Visual Stimulation",
                    "Auditory Stimulation",
                    "Olfactory Stimulation",
                    "Tactile Stimulation"
                ],
                "Solo Kink Practices": [
                    "Bondage",
                    "Self-Stimulation",
                    "Sensory Deprivation",
                    "Other Practices"
                ]
            },
            "Sexual Encounters": {
                "Intercourse": {
                    "Vaginal Intercourse": [
                        "Positions & Techniques",
                        "Sensations & Preferences",
                        "Communication & Negotiation",
                        "Impact on Sexuality"
                    ],
                    "Anal Intercourse": [
                        "Positions & Techniques",
                        "Sensations & Preferences",
                        "Communication & Negotiation",
                        "Impact on Sexuality"
                    ],
                    "Oral Intercourse": {
                        "Fellatio (Giving Oral Sex)": [
                            "Techniques",
                            "Sensations & Preferences",
                            "Communication & Negotiation",
                            "Impact on Sexuality"
                        ],
                        "Cunnilingus (Receiving Oral Sex)": [
                            "Techniques",
                            "Sensations & Preferences",
                            "Communication & Negotiation",
                            "Impact on Sexuality"
                        ]
                    },
                    "Other Intercourse": [
                        "Digital Penetration",
                        "Other Practices"
                    ]
                },
                "Oral Sex": {
                    "Fellatio": {
                        "Techniques": [
                            "Classic",
                            "Deepthroat",
                            "Rimjob",
                            "Other Techniques"
                        ],
                        "Sensations & Preferences": [],
                        "Communication & Negotiation": [],
                        "Impact on Sexuality": []
                    },
                    "Cunnilingus": {
                        "Techniques": [
                            "Licking",
                            "Sucking",
                            "Other Techniques"
                        ],
                        "Sensations & Preferences": [],
                        "Communication & Negotiation": [],
                        "Impact on Sexuality": []
                    },
                    "Other Oral Practices": [
                        "French Kissing",
                        "Other Oral Stimulation"
                    ]
                },
                "Anal Sex": {
                    "Preparation & Safety": [
                        "Lubrication",
                        "Communication",
                        "Hygiene",
                        "Relaxation"
                    ],
                    "Positions & Techniques": [
                        "Doggy Style",
                        "Reverse Cowgirl",
                        "Spooning",
                        "Other Positions"
                    ],
                    "Sensations & Preferences": [
                        "Depth",
                        "Pressure",
                        "Intensity",
                        "Other Sensations"
                    ],
                    "Communication & Negotiation": [
                        "Expressing Preferences",
                        "Asking for What You Want",
                        "Negotiating Pace & Intensity",
                        "Open Communication"
                    ]
                },
                "Touching & Stimulation": [
                    "Foreplay",
                    "Erotic Massage",
                    "Focus on Specific Zones"
                ],
                "Sensual Massage": [
                    "Relaxation & Pleasure",
                    "Exploration of Body & Sensations",
                    "Techniques & Preferences"
                ],
                "Exploration of Erotic Zones": [
                    "Clitoris",
                    "Breasts",
                    "Inner Thighs",
                    "Other Zones"
                ],
                "Experiences with Toys & Objects": [
                    "Vibrators",
                    "Dildos",
                    "Anal Beads",
                    "Other Toys"
                ],
                "Other Practices": [
                    "Fetishes & Preferences",
                    "Roleplay & Fantasy"
                ]
            },
            "Community & Culture": {
                "Kink & BDSM Communities": [
                    "Online Forums & Groups",
                    "Local Events & Meetups",
                    "Clubs & Organizations",
                    "Parties",
                    "Workshops",
                    "Conferences",
                    "Other Events"
                ],
                "Social Interactions": [
                    "Building Connections",
                    "Navigating Social Norms",
                    "Finding Support and Resources"
                ],
                "Learning & Resources": [
                    "Books & Articles",
                    "Online Resources",
                    "Workshops & Courses",
                    "Personal Exploration"
                ]
            },
            "III. Safety & Boundaries": {
                "Consent": [
                    "Understanding Consent",
                    "Communication of Consent",
                    "Negotiating Consent",
                    "Consent in Different Situations",
                    "Consent in Kink & BDSM"
                ],
                "Boundaries": [
                    "Physical Boundaries",
                    "Emotional Boundaries",
                    "Sexual Boundaries",
                    "Communication of Boundaries",
                    "Respecting Others' Boundaries",
                    "Negotiating Boundaries in Relationships"
                ],
                "Safety Practices": [
                    "Negotiation & Communication",
                    "Safe Words & Signals",
                    "Aftercare & Debriefing",
                    "Risk Assessment",
                    "Safe Spaces & Environments"
                ],
                "Resources & Support": [
                    "Online Resources",
                    "Local Organizations",
                    "Support Groups",
                    "Therapists & Counselors"
                ]
            },
            "IV. Goals & Aspirations": {
                "Continued Exploration & Growth": [
                    "Areas of Interest",
                    "Learning Goals",
                    "Resources & Support"
                ],
                "Relationship Goals": [
                    "Desires & Expectations",
                    "Openness & Communication",
                    "Building Healthy & Respectful Relationships",
                    "Kink Compatibility"
                ],
                "Sexual Health & Wellness": [
                    "Goals for Sexual Health",
                    "Resources & Support",
                    "Self-Care Practices"
                ],
                "Overall Vision for Your Sexuality": []
            },
            "V. Reflections & Insights": {
                "Lessons Learned": [
                    "From Experiences & Relationships",
                    "From Learning & Growth"
                ],
                "Impact of Sexuality on Your Life": [],
                "Future Aspirations": [],
                "Continued Exploration & Growth": []
            }
        }
    }
  },


}
from colorama import Fore, Style
import sys
import time
import datetime
import re
import os
from datetime import datetime

import google.generativeai as genai
from termcolor import colored, cprint
import os
import pickle
# ... (memory_templates dictionary same as before) ...




def create_file_structure():
    """Creates the file structure for storing memories."""
    for category in categories:
        for time_period in ["past", "present", "future"]:
            for subcategory in categories[category][time_period]:
                folder_path = os.path.join("memories", category, time_period, subcategory)
                os.makedirs(folder_path, exist_ok=True)


def print_colored(text, color="white"):
    """Prints text with the specified color."""
    color_map = {
        "red": Fore.RED,
        "green": Fore.GREEN,
        "yellow": Fore.YELLOW,
        # ... other colors
    }
    print(f"{color_map.get(color, '')}{text}{Style.RESET_ALL}")

genai.configure(api_key='AIzaSyAcGOOiy3ChC8BZ6Rczo4k8y2xDhG9G4pQ')

# ANSI escape codes for text colors
COLOR_CODES = {
    "red": "\033[91m",
    "green": "\033[92m",
    "yellow": "\033[93m",
    "blue": "\033[94m",
    "magenta": "\033[95m",
    "cyan": "\033[96m",
    "white": "\033[97m",
    "reset": "\033[0m",
}

# ... (other functions: print_colored, create_file_structure,
#                   find_connections, find_connections_in_structures,
#                   similar_phrases, save_connection, get_path_to_key,
#                   save_connections, _write_nested_structure remain the same) ...

def categorize_memory(summary, categories):
    """Categorizes a memory frame based on keywords in the summary."""
    for category, subcategories in categories.items():
        if isinstance(subcategories, dict): # Check if subcategories is a dictionary
            for time_period, keyword_list in subcategories.items():
                for keyword in keyword_list:
                    if re.search(rf"\b{keyword}\b", summary, re.IGNORECASE):
                        return category, time_period, keyword
        else:  # If subcategories is a list (no time periods)
            for keyword in subcategories:
                if re.search(rf"\b{keyword}\b", summary, re.IGNORECASE):
                    return category, "all", keyword # Default time period: "all"

    return "uncategorized", "unknown", "unknown"



# --- Function to Search for Memories ---
def search_memories(query, category=None, time_period=None):
    """Searches for memories based on the given criteria."""
    matching_memories = []
    for root, _, files in os.walk("memories"):
        for file in files:
            if file.endswith(".txt"):
                filepath = os.path.join(root, file)
                # Check if the category and time_period match (if provided)
                if category and category not in filepath:
                    continue
                if time_period and time_period not in filepath:
                    continue
                # Search within the file content
                with open(filepath, 'r', encoding='utf-8') as f:
                    content = f.read()
                    if query.lower() in content.lower():
                        matching_memories.append(filepath)
    return matching_memories



def response_interpreter_for_function_calling(response):
    """Interprets the AI's response and executes function calls
       (excluding memory storage).
    """
    outcome = []
    try:
        if response.candidates:
            for part in response.candidates[0].content.parts:
                if hasattr(part, 'function_call'):
                    function_call = part.function_call
                    function_name = function_call.name
                    function_args = function_call.args

                    if function_name in FUNCTION_MAPPING:
                        function_to_call = FUNCTION_MAPPING[function_name]
                        if function_args is not None:
                            try:
                                outcome = function_to_call(**function_args)
                            except Exception as e:
                                print_colored(
                                    f"Error executing function {function_name}: {e}",
                                    "blue"
                                )
                        else:
                            print_colored(
                                "Warning: Function call arguments are missing.", "red"
                            )
                    else:
                        print(response)
                        print_colored(

                            f"Error: Unknown function: {function_name}", "red"
                        )
                else:
                    print_colored(
                        "No function call found in the response.", "blue"
                    )
    except  Exception as E:
        print(E)
    if outcome is None:
        outcome = ""
    return outcome


# You can add other useful functions here
FUNCTION_MAPPING = {
    # Example:
    # "play_music": play_music,
}


def STORE_MEMORY_Frame(current_time, user_input, ai_response, ai_response2, memory_data):
    """Stores structured memory data and the conversation frame across multiple templates SIMULTANEOUSLY."""

    memory_frame_number = memory_data.get('MEMORY_FRAME_NUMBER', 1)
    edit_number = memory_data.get('EDIT_NUMBER', 0)
    timestamp_format = "%Y-%m-%d_%H-%M-%S"
    timestamp = current_time.strftime(timestamp_format)
    script_path = os.path.abspath(os.path.dirname(__file__))

    # --- Store Memory Data in ALL Templates ---
    for template_name, template_data in memory_templates.items():
        # Get category, time_period, AND subcategory
        category, time_period, subcategory = categorize_memory(ai_response2,
                                                               template_data['category_mapping'])

        # Construct the file path for the template
        template_name_safe = template_name.replace(":", "_") # Make template name safe for file system
        filepath = os.path.join(script_path, "memories", template_name_safe, category, time_period, subcategory)

        # Create directory structure if it doesn't exist
        os.makedirs(filepath, exist_ok=True)

        # Create file for memory frame within the template
        memory_frame_filename = f"MemoryFrame_{memory_frame_number}_{edit_number}_{timestamp}.txt"
        memory_frame_filepath = os.path.join(filepath, memory_frame_filename)

        # Construct memory frame content
        memory_frame_content = (
            f"MEMORY_FRAME_NUMBER: {memory_frame_number}\n"
            f"EDIT_NUMBER: {edit_number}\n"
            f"TIMESTAMP: {timestamp}\n"
            f"USER_INPUT: {user_input}\n"
            f"AI_RESPONSE: {ai_response}\n"
            f"AI_RESPONSE_SUMMARY: {ai_response2}\n"
        )

        # Write memory frame content to file
        with open(memory_frame_filepath, 'w', encoding='utf-8') as f:
            f.write(memory_frame_content)

        print_colored(f"Memory stored in {template_name}: {memory_frame_filepath}", "green")

    # --- Store Conversation Frame (Remains the Same) ---
    separator = "######$######"
    os.makedirs(os.path.join(script_path, "conversation_logs"), exist_ok=True)

    conversation_filename = f"MemoryFrame_{timestamp}.txt"
    conversation_filepath = os.path.join(script_path, "conversation_logs", conversation_filename)

    readable_timestamp = current_time.strftime('%Y-%m-%d %H:%M:%S')
    frame_content = f"{separator} Memory Frame {memory_frame_number}, Edit {edit_number} - {readable_timestamp} {separator}\n"
    frame_content += f"USER_INPUT: {user_input}\n"
    frame_content += f"AI_RESPONSE: {ai_response}\n"
    frame_content += f"AI_RESPONSE_SUMMARY: {ai_response2}\n"
    frame_content += f"{separator} Memory Frame End {memory_frame_number}, Edit {edit_number} {separator}\n\n"

    with open(conversation_filepath, 'a', encoding='utf-8') as f:
        f.write(frame_content)

    print(f"Memory frame saved in: {conversation_filepath}")

    # --- Update Memory Frame Log (Remains the Same) ---
    os.makedirs(os.path.join(script_path, "memory_logs"), exist_ok=True)
    memory_log_filepath = os.path.join(script_path, "memory_logs", "MemoryFrames_log.txt")

    with open(memory_log_filepath, 'a', encoding='utf-8') as f:
        f.write(
            f"MemoryFrame: {memory_frame_number}, Edit: {edit_number}, Type: Text, path: {filepath}, time: {timestamp}, session: {memory_frame_number}_{edit_number}\n")

    print(f"Memory frame log updated: {memory_log_filepath}")


# --- Main Loop ---
memory_data = {
    'MEMORY_FRAME_NUMBER': 1,  # Initialize memory frame number
    'EDIT_NUMBER': 0  # Initialize edit number
}
while True:
    try:
        user_input = input("Enter input: ")

        interaction_model = genai.GenerativeModel(
            model_name='gemini-1.5-flash-latest',
            safety_settings={'HARASSMENT': 'block_none'},
            system_instruction='You follow orders and generate creative text interactions'
        )

        current_time =  datetime.now()

        # Format timestamp outside the prompt
        formatted_timestamp = current_time.strftime('%Y-%m-%d_%H-%M-%S')

        chat1 = interaction_model.start_chat(history=[])
        prompt = f"currentTime:  {formatted_timestamp}  create {user_input} "
        chat1 = interaction_model.start_chat(history=[])
        prompt = f"currentTime:  {current_time}  create {user_input} "
        print(f"Prompt:  {prompt}")
        response1 = chat1.send_message(prompt)
        try:
            print_colored(f"AI Response: {response1.text}", "green")
        except Exception as e:
            print(e)

        # --- Memory Processing with Gemini ---
        memory_model = genai.GenerativeModel(
            model_name='gemini-1.5-flash-latest',
            safety_settings={'HARASSMENT': 'block_none'},
            system_instruction="""You are a sophisticated AI assistant helping to organize memories. 
                    Analyze and summarize the above user-AI conversation, focusing on elements that would be most useful for storing and retrieving this memory later. Don't hallucinate.
                    use provided schema  for  response
                    Specifically, provide the following information in a structured format using JSON:
                    """,

        )

        schema_for_chat2 = """    
            {
              "concise_summary": "Your concise summary of the conversation goes here.",
              "main_topic": "The central theme or subject of the conversation.",
              "keywords": ["keyword1", "keyword2", "keyword3", ...], 
              "entities": ["entity1", "entity2", ...], 
              "actions": ["action1", "action2", ...], 
              "category": "The category of the memory", 
              "subcategory": "The subcategory of the memory",
              "memory_about": "A brief description of what the memory is about", 
              "interaction_type": "Describe the type of interaction that occurred in this conversation.",
              "positive_impact": "What were the positive outcomes or benefits of this conversation?", 
              "negative_impact":  "Were there any negative outcomes or drawbacks discussed?", 
              "expectations": "What were the user's expectations before the conversation?",
              "object_states": "Describe the objects or locations involved.",
              "short_description": "An even briefer summary", 
              "details": {}, // Optional additional details as key-value pairs
              "facts": ["fact1", "fact2", ...],
              "contradictions_paradoxes": ["contradiction1", "paradox2", ...],
              "strength_of_experience": "A description of the intensity or significance of this conversation for the user.",
              "personal_information": "Any relevant personal details",
              "observed_interactions": ["interaction1", "interaction2", ...],
              "people": ["person1", "person2", ...],
              "objects": ["object1", "object2", ...],
              "animals": ["animal1", "animal2", ...],
              "obtained_knowledge": "What new knowledge or insights were gained from this conversation?",
              "scientific_data": ["data_point1", "data_point2", ...],
              "tags": ["tag1", "tag2", ...] // For additional retrieval 
            }

            """

        chat_2 = memory_model.start_chat(history=[])
        create_memory_prompt = f"""User: {user_input}
                                    AI: {response1.text}
                                    Schema:
                                    {schema_for_chat2}"""

        print(create_memory_prompt)

        response2 = chat_2.send_message(create_memory_prompt)
        print("-----------------------------------------------------------------------------------")
        print(f"Memory Data: {response2.text}")

        # --- Function Execution ---
        response_interpreter_for_function_calling(response2)

        STORE_MEMORY_Frame(
            current_time,  # Pass current_time as the first argument
            user_input,
            response1.text,
            response2.text,
            memory_data
        )

    except Exception as e:
        print_colored(f"Error in the main loop: {e}", "red")